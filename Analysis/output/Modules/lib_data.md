# 模块: lib\data

```markdown
### 1. **模块概述**

该目录 `lib/data` 在项目中主要负责**单位属性和单位的定义与管理**，为应用提供统一的单位显示逻辑和默认排序规则。它通过静态常量和本地化资源支持多语言显示，确保在不同场景下（如单位转换器、UI展示等）能够正确、一致地呈现物理属性及其对应的单位信息。该模块是应用中单位相关功能的基础数据层，为其他模块提供可复用的数据结构和配置。

---

### 2. **组件关系**

- **`default_order.dart`** 提供了**单位属性的默认排序列表**和**每个属性下单位的默认顺序**，这些常量被用于控制单位在界面中的显示顺序，确保一致性。
  
- **`property_unit_maps.dart`** 则负责**物理属性和单位的UI信息映射**，通过枚举类型和本地化资源动态生成属性名称、图标路径以及单位名称。它依赖于 `default_order.dart` 中定义的属性顺序，以确保在构建UI时按照正确的顺序展示属性和单位。

- 两个文件共同协作：`property_unit_maps.dart` 使用 `default_order.dart` 中的默认顺序来组织属性和单位的显示逻辑，而 `default_order.dart` 则为 `property_unit_maps.dart` 提供数据结构支持，确保整体展示的一致性和可维护性。

简而言之，`default_order.dart` 定义“什么应该显示”，`property_unit_maps.dart` 定义“如何显示”，两者结合实现了单位属性与单位的统一管理和展示逻辑。
```

## 文件详细分析

### default_order.dart

```markdown
1. **主要功能**: 该文件定义了不同单位属性的默认排序列表和各属性下的单位顺序，用于统一单位转换器中的显示顺序。

2. **核心组件**:  
   - `defaultPropertiesOrder`: 一个常量列表，表示不同单位属性的默认排列顺序。  
   - `defaultUnitsOrder`: 一个常量映射，将每个单位属性（如长度、面积等）与其对应的单位列表关联，用于指定该属性下单位的显示顺序。

3. **关键逻辑**:  
   - 文件中没有复杂的算法或流程，仅通过静态常量定义了不同单位属性及其下属单位的默认顺序，供其他模块在展示或处理单位时使用。
```

### property_unit_maps.dart

```markdown
1. **主要功能**: 该文件定义了不同物理属性及其单位的UI显示信息，用于在应用中动态展示属性名称和单位名称。

2. **核心组件**:
   - `getPropertyUiMap(BuildContext context)`: 返回一个`PROPERTYX`到`PropertyUi`的映射，包含每个属性的名称和图标路径。
   - `getUnitUiMap(BuildContext context)`: 返回一个`PROPERTYX`到单位名称映射的嵌套字典，用于显示每个属性下的具体单位名称。
   - `PROPERTYX`: 枚举类型，表示不同的物理属性（如长度、面积等）。
   - `PropertyUi`: 一个记录类型，包含属性名称、图标路径和填充图标路径。
   - `AppLocalizations.of(context)!`: 用于获取本地化字符串，实现多语言支持。
   - 各个单位枚举（如`LENGTH`, `AREA`, `DENSITY`等）：表示不同属性下的具体单位。

3. **关键逻辑**:
   - `getPropertyUiMap`通过遍历`PROPERTYX`枚举，将每个属性名称从本地化资源中提取，并为每个属性生成对应的图标路径。
   - `getUnitUiMap`构建了一个多层映射结构，将每个属性与其所有可能的单位名称进行关联，单位名称同样来自本地化资源，确保多语言支持。
   - 使用`basePath`变量统一管理图标路径，提高代码可维护性。
```

